---
title: Google PostgreSQL Reference
owner: Cloud Service Broker
---

<strong><%= modified_date %></strong>

This topic provides reference information about the Google PostgreSQL service (csb-google-postgres).
It details the plans, configuration parameters, and binding credentials.

## <a id="plans"></a> Plans

A default plan will be made available when installing the tile. This plan is for reference only, and
is not intended for production use.
It is recommended that you remove this default plan and create plans which fit your requirements.

## <a id="plans-config"></a> Plan Configuration Parameters

When configuring <%= vars.product_short %> you can add additional plans.
For how to configure plans, see
[Configure Services with Cloud Service Broker for GCP](../installing-with-gcp.html#services).

The following table lists parameters which can be configured at a plan level:

| Parameter Name       | Values                         | Default   |
|----------------------|--------------------------------|-----------|
| `name`*              | The plan name                  | _n/a_     |
| `id`*                | A unique GUID                  | _n/a_     |
| `description`*       | Description of the new plan    | _n/a_     |
| `display_name`       | Name to use when displaying plan in marketplace    | _n/a_     |
| `free`               | When false, Service Instances of this Service Plan have a cost    | true     |
| `bindable`           | Specifies whether Service Instances of the Service Plan can bind to applications    | true     |
| `plan_updateable`    | Whether the Plan supports upgrade/downgrade/sidegrade to another version    | true     |

<sup>*</sup> Required

You can also add any of the configuration parameters listed in the [parameters](#parameters) section to your plan.

To create plans with specific size and versions we recommend setting `tier`, `storage_gb` and
`postgres_version` properties.

<p class="note">
  <strong>Note:</strong> If you set a parameter at plan level, developers cannot
  change the value when creating or updating service instances.
</p>

<p class="note warning">
  <strong>Warning: </strong>
  When editing a plan configuration, consider the implications on existing services. If a default value is changed,
  then this will be applied to existing service instances when they are updated. For example if the `region` is changed,
  then when a service instance is updated, an attempt will be made to change the region. This is not a supported operation
  in GCP and may result in data loss.
</p>

## <a id="parameters"></a> Configuration Parameters

You can provision a service by running:

```bash
cf create-service csb-google-postgres PLAN-NAME SERVICE-INSTANCE-NAME -c '{"PARAMETER-NAME": "PARAMETER-VALUE"}'
```

You can update the configuration parameters for a service instance by running:

```bash
cf update-service SERVICE-INSTANCE-NAME -c '{"PARAMETER-NAME": "PARAMETER-VALUE"}'
```

The table below lists the parameters that you can configure, using the `-c` flag, when
provisioning or updating a csb-google-postgres service. Refer to the Operation column to
see whether a paramter is supported only for provision, or for both provision and update:

<table>
  <thead>
    <tr>
      <th width="20%">Parameter Name</th>
      <th width="10%">Type</th>
      <th width="40%">Description</th>
      <th width="20%">Default</th>
      <th width="10%">Operation</th>
    </tr>
  </thead>
  <tr>
    <td><code>tier</code></td>
    <td>string</td>
    <td>
      (Required unless defined in plan) Google machine tier. This determines the CPU and RAM resource. Please review the Google [documentation for machine tiers](https://cloud.google.com/sql/docs/postgres/create-instance#machine-types), to specify an appropriate machine.
    </td>
    <td> _n/a_ </td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>postgres_version</code></td>
    <td>string</td>
    <td>
      (Required unless defined in plan) The version for the Postgres instance.
    </td>
    <td><code>POSTGRES_13</code></td>
    <td>provision</td>
  </tr>
  <tr>
    <td><code>storage_gb</code></td>
    <td>string</td>
    <td>
      (Required unless defined in plan) Size of storage volume for service instance. 10&ndash;4096&nbsp;GB.
    </td>
    <td><code>10</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>instance_name</code></td>
    <td>string</td>
    <td>Name for the PostgreSQL instance.</td>
    <td><code>csb-postgres-INSTANCE-ID</code></td>
    <td>provision</td>
  </tr>
  <tr>
    <td><code>db_name</code></td>
    <td>string</td>
    <td>Name for the database.</td>
    <td><code>csb-db</code></td>
    <td>provision</td>
  </tr>
  <tr>
    <td><code>region</code></td>
    <td>string</td>
    <td>
      The region of the PostgreSQL instance.
    </td>
    <td>The value the operator entered for <strong>Region</strong> in <%= vars.ops_manager %>.</td>
    <td>provision</td>
  </tr>
  <tr>
    <td><code>require_ssl</code></td>
    <td>boolean</td>
    <td>
      Require TLS for the connection between PostgreSQL and the apps bound to the service.
    </td>
    <td><code>true</code> </td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>authorized_network</code></td>
    <td>string</td>
    <td>
      The name of the Google Compute Engine network to which the instance is connected.
    </td>
    <td><code>default</code> </td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>authorized_network_id</code></td>
    <td>string</td>
    <td>
      The ID of the Google Compute Engine network to which the instance is connected.
    </td>
    <td><code>""</code> </td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>authorized_networks_cidrs</code></td>
    <td>array</td>
    <td>
      CIDR notation IPv4 or IPv6 addresses that are allowed to access this instance.
    </td>
    <td><code>[]</code> </td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>public_ip</code></td>
    <td>Boolean</td>
    <td>
      Assigns a static public IPV4 IP to the database. Note - authorized_networks_cidrs must be configured on the selected network to enable access.
    </td>
    <td><code>false</code> </td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>backups_retain_number</code></td>
    <td>number</td>
    <td>
      The number of backups to retain. Set this to zero to deactivate backups.
    </td>
    <td><code>7</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>backups_location</code></td>
    <td>string</td>
    <td>
      The location where backups are stored.
    </td>
    <td><code>us</code></td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>backups_start_time</code></td>
    <td>string</td>
    <td>
      Start of the backup time window in UTC.
    </td>
    <td><code>07:00</code> </td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>backups_point_in_time_log_retain_days</code></td>
    <td>number</td>
    <td>
      The number of days to retain point in time logs. Set to zero to deactivate point in time logging.
      Before you set this property, you must first enable backups using the <code>backups_retain_number</code> property.
    </td>
    <td><code>7</code> </td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>credentials</code></td>
    <td>string</td>
    <td>
      The GCP credentials.
    </td>
    <td>The value the operator entered for <strong>Credentials</strong> in <%= vars.ops_manager %>.</td>
    <td>provision and update</td>
  </tr>
  <tr>
    <td><code>project</code></td>
    <td>string</td>
    <td>
      The GCP project to use.
    </td>
    <td>The value the operator entered for <strong>Project</strong> in <%= vars.ops_manager %>.</td>
    <td>provision</td>
  </tr>
</table>

## <a id="binding"></a> Binding

You can bind a service by running:

```bash
cf bind-service APP-NAME SERVICE-INSTANCE --binding-name BINDING-NAME
```

After binding, a new user is created that inherits from the provision user.
The provision user is created during provisioning and it has `create role` and `grant` permissions
for databases and tables.
After unbinding, all object ownership is passed from the bind user to the provision user.

### <a id="binding-creds"></a> Binding Credentials

The format for binding credentials for Google PostgreSQL is as follows:

```json
{
    "name" : "DATABASE-NAME",
    "hostname" : "DATABASE-SERVER-HOST",
    "port" : "DATABASE-SERVER-PORT",
    "username" : "AUTHENTICATION-USERNAME",
    "password" : "AUTHENTICATION-PASSWORD",
    "require_ssl" : true,
    "uri" : "DATABASE-CONNECTION-URI",
    "jdbcUrl" : "JDBC-FORMAT-CONNECTION-URI",
    "sslcert" : "SSL_CLIENT_CERT",
    "sslkey" : "SSL_CLIENT_CERT_KEY",
    "sslrootcert" : "SSL_ROOT_CERT"
}
```
